name: Release Workflow Agenda

on:
  push:
    tags:
      - "v*.*.*"

jobs:
  detectar-versao:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout do repositÃ³rio
        uses: actions/checkout@v3
        with:
          fetch-depth: 0

      - name: Mostrar referÃªncia completa
        run: 'echo "Tag detectada: $GITHUB_REF"'

      - name: Mostrar nome simplificado da tag
        run: "echo \"VersÃ£o: ${GITHUB_REF#refs/tags/}\""

      - name: Extrair versÃ£o
        id: extract-version
        run: echo "version=${GITHUB_REF#refs/tags/}" >> $GITHUB_OUTPUT

      - name: Gerar changelog
        run: |
          echo "ğŸ“‹ Gerando changelog para a versÃ£o ${{ steps.extract-version.outputs.version }}"
          echo "ğŸ“ Ãšltimo commit:"
          git log -1 --pretty=format:"%h - %an - %s"
          echo "âœ… Release ${{ steps.extract-version.outputs.version }} preparada com sucesso!"

      - name: Upload artifacts (exemplo)
        uses: actions/upload-artifact@v3
        with:
          name: release-info-${{ steps.extract-version.outputs.version }}
          path: README.md